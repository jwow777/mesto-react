{"version":3,"sources":["images/header/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/DeletePopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","style","backgroundImage","link","onClick","onCardClick","type","onCardDelete","name","onCardLike","length","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","item","Footer","PopupWithForm","isOpen","onSubmit","title","children","submit","onClose","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","autoComplete","value","onChange","target","EditAvatarPopup","inputRef","useRef","onUpdateAvatar","current","reset","ref","AddPlacePopup","setLink","ImagePopup","DeletePopup","onDeleteCard","api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkResponse","userData","body","JSON","stringify","cardData","cardId","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopups","getUserInfo","userDataFromServer","catch","err","console","log","getInitialCards","cardsFromServer","Provider","dislike","newCard","state","c","like","setUserInfo","postCard","setUserAvatar","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.33c96c7e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import logo from '../images/header/logo.svg';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Место Россия\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import {createContext} from 'react';\r\nexport const CurrentUserContext = createContext();","import {useContext} from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n    `element__btn-delete btn ${isOwn ? 'element__btn-delete_visible' : 'element__btn-delete_hidden'}`\r\n  ); \r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n    `element__btn-like btn ${isLiked && 'element__btn-like_active'}`\r\n  );\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }  \r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }  \r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card);\r\n  }  \r\n\r\n  return (\r\n    <li className='element'>\r\n      <div className='element__image' style={{backgroundImage: `url(${props.card.link})`}} onClick={handleClick}></div>\r\n      <button type='button' className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n      <div className='element__container'>\r\n        <h2 className='element__location'>{props.card.name}</h2>\r\n        <div className='element__like-container'>\r\n          <button type='button' className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n          <span className='element__like-counter'>{props.card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;","import {useContext} from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className='content'>\r\n      <section className='profile'>\r\n        <div className='profile__avatar' style={{backgroundImage: `url(${currentUser.avatar})`}} onClick={props.onEditAvatar}></div>\r\n        <div className='profile__info'>\r\n          <div className='profile__info-container'>\r\n            <h1 className='profile__full-name'>{currentUser.name}</h1>\r\n            <button type='button' className='profile__btn-edit btn' onClick={props.onEditProfile}></button>\r\n          </div>\r\n          <p className='profile__description'>{currentUser.about}</p>\r\n        </div>\r\n        <button type='button' className='profile__btn-add btn' onClick={props.onAddPlace}></button>\r\n      </section>\r\n      <section className='elements'>\r\n        <ul className='elements__container'>\r\n          {props.cards.map(item => (\r\n            <Card card={item} \r\n            onCardClick={props.onCardClick} \r\n            onCardLike={props.onCardLike} \r\n            onCardDelete={props.onCardDelete} \r\n            key={item._id}/>\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","function PopupWithForm(props) {\r\n  return (\r\n    <>\r\n      <div className={`popup popup_overlay_form popup_type_${props.name}${props.isOpen ? ' popup_opened': ''}`}>\r\n        <div className='popup__container'>\r\n          <form className={`popup__form popup__form_type_${props.name}`} onSubmit={props.onSubmit}>\r\n            <h2 className='popup__title'>{props.title}</h2>\r\n            {props.children}\r\n            <button type='submit' className='popup__button btn'>{props.submit}</button>\r\n          </form>\r\n        </div>\r\n        <button type='button' className='popup__btn-close btn' onClick={props.onClose}></button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import {useEffect, useState, useContext} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser({name, about:description});\r\n    props.onClose();\r\n    setName('');\r\n    setDescription('');\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm name='edit' title='Редактировать профиль' submit='Сохранить' isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n      <input\r\n        type='text'\r\n        name='name'\r\n        className='popup__input'\r\n        placeholder='Имя'\r\n        required\r\n        minLength='2'\r\n        maxLength='40'\r\n        autoComplete='off'\r\n        value={name || ''}\r\n        onChange={handleChangeName}\r\n      />\r\n      <span className=\"popup__input-error\"></span>\r\n      <input\r\n        type='text'\r\n        name='about'\r\n        className='popup__input'\r\n        placeholder='О себе'\r\n        required\r\n        minLength='2'\r\n        maxLength='200'\r\n        autoComplete='off'\r\n        value={description || ''}\r\n        onChange={handleChangeDescription}\r\n      />\r\n      <span className='popup__input-error'></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import {useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const inputRef = useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({avatar: inputRef.current.value});\r\n    props.onClose();\r\n    e.target.reset();\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm name='avatar' title='Обновить аватар' submit='Сохранить' isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n      <input\r\n        type='url'\r\n        name='avatar'\r\n        className='popup__input'\r\n        placeholder='Ссылка на изображение'\r\n        required\r\n        autoComplete='off'\r\n        ref={inputRef}\r\n      />\r\n      <span className='popup__input-error'></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import {useState} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink(e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlace({name, link});\r\n    props.onClose();\r\n    setName('');\r\n    setLink('');\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm name='add' title='Новое место' submit='Создать' isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n      <input \r\n        type='text'\r\n        name='name' \r\n        className='popup__input' \r\n        placeholder='Название' \r\n        required \r\n        minLength='2' \r\n        maxLength='30' \r\n        autoComplete='off' \r\n        value={name || ''}\r\n        onChange={handleChangeName}\r\n      />\r\n      <span className='popup__input-error'></span>\r\n      <input \r\n        type='url'\r\n        name='link' \r\n        className='popup__input' \r\n        placeholder='Ссылка на изображение' \r\n        required \r\n        autoComplete='off' \r\n        value={link || ''}\r\n        onChange={handleChangeLink}\r\n      />\r\n      <span className='popup__input-error'></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","function ImagePopup(props) {\r\n  return (\r\n    <div className={`popup popup_overlay_image${props.card ? ' popup_opened' : ''}`}>\r\n      <div className='popup__container popup__container_image'>\r\n        <img className='popup__image' src={props.card ? props.card.link : ''} alt={props.card ? props.card.name : ''}/>\r\n        <p className='popup__description'>{props.card ? props.card.name : ''}</p>\r\n      </div>\r\n      <button type='button' className='popup__btn-close btn' onClick={props.onClose}></button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import PopupWithForm from './PopupWithForm';\r\n\r\nfunction DeletePopup(props) {\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onDeleteCard(props.isOpen);\r\n    props.onClose();\r\n  }\r\n\r\n  return <PopupWithForm \r\n          name='delete '\r\n          title='Вы уверены?'\r\n          submit='Да'\r\n          isOpen={props.isOpen} \r\n          onClose={props.onClose} \r\n          onSubmit={handleSubmit} \r\n         />;\r\n}\r\n\r\nexport default DeletePopup;","class Api {\r\n  constructor({baseUrl, headers}) {\r\n      this._baseUrl = baseUrl;\r\n      this._headers = headers;\r\n    }\r\n  \r\n    _checkResponse(res) {\r\n      if (res.ok) {\r\n          return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n\r\n    getUserInfo() {\r\n      return fetch(`${this._baseUrl}/users/me`, { \r\n        method: 'GET', \r\n        headers: this._headers\r\n      })      \r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    getInitialCards() {\r\n      return fetch(`${this._baseUrl}/cards`, { \r\n        method: 'GET', \r\n        headers: this._headers\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    setUserInfo(userData) {\r\n      return fetch(`${this._baseUrl}/users/me`, { \r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify(userData)\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    postCard(cardData) {\r\n      return fetch(`${this._baseUrl}/cards`, { \r\n        method: 'POST', \r\n        headers: this._headers, \r\n        body: JSON.stringify(cardData)\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    deleteCard(cardId) {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}`, { \r\n        method: 'DELETE', \r\n        headers: this._headers\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    like(cardId) {\r\n      return fetch(`${this._baseUrl}/cards/likes/${cardId}`, { \r\n        method: 'PUT', \r\n        headers: this._headers\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    dislike(cardId) {\r\n      return fetch(`${this._baseUrl}/cards/likes/${cardId}`, { \r\n        method: 'DELETE', \r\n        headers: this._headers\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  \r\n    setUserAvatar(userData) {\r\n      return fetch(`${this._baseUrl}/users/me/avatar`, { \r\n        method: 'PATCH', \r\n        headers: this._headers, \r\n        body: JSON.stringify(userData)\r\n      })\r\n        .then(this._checkResponse);\r\n    }\r\n  }\r\n\r\n  const api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\r\n    headers: {\r\n      authorization: '5e9e6ed0-2e3b-49ef-bceb-982a1b5626d9',\r\n      'Content-Type': 'application/json'\r\n    }\r\n  });\r\n\r\n  export default api;","import {useEffect, useState} from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ImagePopup from './ImagePopup';\r\nimport DeletePopup from './DeletePopup';\r\nimport api from '../utils/api';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState(false);\r\n  const [cards, setCards] = useState([]);\r\n\r\n  useEffect(() => \r\n    api.getUserInfo()\r\n    .then(userDataFromServer => setCurrentUser(userDataFromServer))\r\n    .catch(err => console.log(err)\r\n  ), [])\r\n\r\n  // Открытие попапов\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleCardDeleteClick(card) {\r\n    setIsDeletePopupOpen(card);\r\n  }\r\n\r\n  // Закрытие попапов\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsDeletePopupOpen(false);\r\n    setSelectedCard(false);\r\n  }\r\n\r\n  // Обновление данных пользователя\r\n  function handleUpdateUser(userData) {\r\n    api.setUserInfo(userData)\r\n    .then(res => setCurrentUser(res))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateAvatar(userData) {\r\n    api.setUserAvatar(userData)\r\n    .then(res => setCurrentUser(res))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  useEffect(() => \r\n    api.getInitialCards()\r\n    .then(cardsFromServer => setCards(cardsFromServer))\r\n    .catch(err => console.log(err)\r\n  ), []); \r\n\r\n  // Лайк/дизлайк карточки\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    \r\n    if (!isLiked) {\r\n      api.like(card._id)\r\n      .then(newCard => setCards(state => state.map(c => c._id === card._id ? newCard : c)))\r\n      .catch(err => console.log(err));\r\n    } else {\r\n      api.dislike(card._id)\r\n      .then(newCard => setCards(state => state.map(c => c._id === card._id ? newCard : c)))\r\n      .catch(err => console.log(err));\r\n    }\r\n  } \r\n\r\n  // Добавление карточки\r\n  function handleAddPlace(cardData) {\r\n    api.postCard(cardData)\r\n    .then(newCard => setCards([newCard, ...cards]))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  // Удаление карточки\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n    .then(() => setCards(cards.filter(c => c._id !== card._id)))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Header/>\r\n      <Main\r\n        cards={cards}\r\n        onEditProfile={handleEditProfileClick}\r\n        onAddPlace={handleAddPlaceClick}\r\n        onEditAvatar={handleEditAvatarClick}\r\n        onCardDelete={handleCardDeleteClick}\r\n        onCardClick={setSelectedCard}\r\n        onCardLike={handleCardLike}\r\n      />\r\n      <Footer/>\r\n      <EditProfilePopup \r\n        isOpen={isEditProfilePopupOpen} \r\n        onClose={closeAllPopups} \r\n        onUpdateUser={handleUpdateUser}\r\n      />\r\n      <AddPlacePopup \r\n        isOpen={isAddPlacePopupOpen} \r\n        onClose={closeAllPopups} \r\n        onAddPlace={handleAddPlace}\r\n      />\r\n      <EditAvatarPopup \r\n        isOpen={isEditAvatarPopupOpen} \r\n        onClose={closeAllPopups} \r\n        onUpdateAvatar={handleUpdateAvatar}\r\n      />\r\n      <DeletePopup \r\n        isOpen={isDeletePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onDeleteCard={handleCardDelete}\r\n      />\r\n      <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();"],"sourceRoot":""}